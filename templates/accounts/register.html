{%extends 'base/base.html'%}
{%load static%}
{%block title%}Create User{%endblock title%}
{%block content%}
<div class="py-3 text-center h4 users-page-title">Add New User</div>

    <form method="post" class="row create-user-form">

    <div class="col-md-12 m-2">
        <a href="{%url 'system_users'%}" class="btn btn-lg back-to-dashboard-button">
            <i class="bi bi-arrow-left-circle"></i>
            Back
        </a>
    </div>

    {% csrf_token %}
    <div class="col-md-6 mt-2">
            <label class="h6">Email</label>
            <div class="form-group">
              <input type="text" required autofocus name="email" placeholder='email' class="form-control">
            </div>
        </div>

         <div class="col-md-6 mt-2">
            <label for="phone">Phone number:</label>
            <div class="form-group">
                <input type="tel" class="form-control" id="phone" name="phone" placeholder="XXX XXX XXX" pattern="\+254\d{9}" required>

            </div>
        </div>

        <div class="col-md-6 mt-2">
            <label class="h6">First Name</label>
            <div class="form-group">
              <input type="text" required autofocus name="first_name" placeholder='first name' class="form-control">
            </div>
        </div>

         <div class="col-md-6 mt-2">
            <label class="h6">Last Name</label>
            <div class="form-group">
              <input type="text" required autofocus name="last_name" placeholder='last_name' class="form-control">
            </div>
        </div>

        <div class="col-md-6 mt-2">
            <label class="h6">Password</label>
            <div class="form-group">
              <input type="password" required autofocus name="password1" placeholder='password' class="form-control">
            </div>
        </div>


        <div class="col-md-6 mt-2">
            <label class="h6">Password Confirmation</label>
            <div class="form-group">
              <input type="password" required autofocus name="password2" placeholder='confirm password' class="form-control">
            </div>
        </div>

    <div class="col-md-12 text-center mt-3 mb-2">
        <button class="btn btn-secondary loginbtn h5" type="submit">Submit</button>
    </div>
</form>
<script>
$(document).ready(function() {
  // Add formatting to phone number input
  $('#phone').on('input', function() {
    var phoneNumber = $(this).val();
    phoneNumber = phoneNumber.replace(/\D/g, ''); // Remove all non-numeric characters
    if (phoneNumber.length >= 9) {
      phoneNumber = '+254' + phoneNumber.substr(-9); // Prepend +254 to phone number
    }
    $(this).val(phoneNumber);
  });
});

</script>
{%endblock content%}